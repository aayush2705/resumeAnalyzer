<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Resume Analysis Result</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

    <style>
        body {
            background: linear-gradient(135deg, #f1f4f9, #e3f2fd);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .container {
            margin-top: 50px;
            max-width: 950px;
        }

        .card {
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: none;
        }

        .section-card {
            background: #ffffff;
            border-radius: 12px;
            padding: 20px 25px;
            margin-top: 20px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
        }

        .section-title {
            font-weight: 600;
            color: #0d47a1;
            margin-bottom: 12px;
        }

        .tag {
            display: inline-block;
            background-color: #007bff;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            margin: 4px;
            font-size: 14px;
        }

        .tip-positive {
            color: green;
            font-weight: 500;
        }

        .tip-negative {
            color: red;
            font-weight: 500;
        }

        .score-bar {
            height: 18px;
            border-radius: 10px;
            background-color: #e9ecef;
            overflow: hidden;
        }

        .score-fill {
            height: 18px;
            border-radius: 10px;
            transition: width 0.6s ease-in-out;
        }

        .score-low {
            background-color: #f44336;
        }

        .score-medium {
            background-color: #ff9800;
        }

        .score-high {
            background-color: #4CAF50;
        }

        .header-title {
            font-weight: 700;
            color: #1565c0;
        }

        .buttons-container {
            margin-top: 30px;
            text-align: center;
        }

        a.video-link {
            color: #1565c0;
            text-decoration: none;
            font-weight: 500;
        }

        a.video-link:hover {
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="card p-4">
            <h3 class="text-center mb-4 header-title">Resume Analysis Summary</h3>
            <hr />

            <!-- Candidate Details -->
            <p><strong>Candidate Name:</strong> {{ resume.candidate_name }}</p>
            <p><strong>Candidate Level:</strong> {{ resume.candidate_level }}</p>

            <!-- Analysis Summary -->
            <div class="section-card">
                <h5 class="section-title">Analysis Summary</h5>
                {% if resume.parsed_text %}
                <p>{{ resume.parsed_text }}</p>
                {% else %}
                <p class="text-muted">No analysis found for this resume.</p>
                {% endif %}
            </div>

            <!-- Current Skills + Job Role -->
            <div class="section-card">
                <h5 class="section-title">Your Current Skills</h5>
                <div>
                    {% if resume.skills %}
                    {% if resume.skills is string %}
                    <p>{{ resume.skills }}</p>
                    {% else %}
                    <p>{{ resume.skills | join(', ') }}</p>
                    {% endif %}
                    {% else %}
                    <span class="text-muted">No skills detected in resume.</span>
                    {% endif %}
                </div>

                <!-- ðŸ”¥ Predicted Job Roles (Top 3) in Green Box -->
                <div class="section-card mt-4">
                    <h5 class="section-title">Predicted Job Roles</h5>

                    {% if resume.predicted_role %}
                    <div class="alert alert-success mb-0">
                        <strong>{{ resume.predicted_role }}</strong>
                    </div>
                    {% else %}
                    <div class="alert alert-warning mb-0">
                        <em>No job role predictions available.</em>
                    </div>
                    {% endif %}

                </div>


                <!-- Recommended Skills -->
                <div class="section-card">
                    <h5 class="section-title">Recommended Skills to Add</h5>
                    <div>
                        {% if resume.recommended_skills %}
                        {% for skill in resume.recommended_skills %}
                        <span class="tag">{{ skill }}</span>
                        {% endfor %}
                        {% else %}
                        <span class="text-muted">No recommendations available.</span>
                        {% endif %}
                    </div>
                </div>

                <!-- âœ… Corrected Courses & Certifications Section -->
                <div class="section-card">
                    <h5 class="section-title">Courses & Certifications</h5>
                    {% if resume.courses %}
                    <ul class="mb-0">
                        {% for course in resume.courses %}
                        <li>
                            <a href="{{ course.link }}" target="_blank">{{ course.name }}</a>
                        </li>
                        {% endfor %}
                    </ul>
                    {% else %}
                    <p class="text-muted">No specific course recommendations found.</p>
                    {% endif %}
                </div>

                <!-- ROADMAP -->
                {% if resume.roadmap %}
                <div class="card mt-4 shadow">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">{{ resume.roadmap.title }}</h5>
                    </div>
                    <div class="card-body">
                        <h6>Learning Steps:</h6>
                        <ul>
                            {% for step in resume.roadmap.steps %}
                            <li>{{ step }}</li>
                            {% endfor %}
                        </ul>
                        <hr>
                        {% if resume.roadmap.image %}
                        <img src="{{ url_for('static', filename='roadmaps/' + resume.roadmap.image.split('/')[-1]) }}"
                            alt="{{ resume.roadmap.title }}" class="img-fluid rounded shadow">
                        {% endif %}
                    </div>
                </div>
                {% endif %}


                <!-- Resume Tips -->
                <div class="section-card">
                    <h5 class="section-title">Resume Tips & Ideas</h5>
                    <ul class="mb-0">
                        {% if resume.tips %}
                        {% for tip in resume.tips %}
                        {% if tip.startswith('[+]') %}
                        <li class="tip-positive">{{ tip }}</li>
                        {% else %}
                        <li class="tip-negative">{{ tip }}</li>
                        {% endif %}
                        {% endfor %}
                        {% else %}
                        <li>No tips generated yet.</li>
                        {% endif %}
                    </ul>
                </div>

                <!-- Overall Resume Score -->
                <div class="section-card">
                    <h5 class="section-title">Overall Resume Score</h5>
                    {% if resume.score is defined and resume.score is not none %}
                    <div class="score-bar mb-2">
                        {% if resume.score < 60 %} <div class="score-fill score-low"
                            style="width: {{ resume.score }}%;">
                    </div>
                    {% elif resume.score < 80 %} <div class="score-fill score-medium"
                        style="width: {{ resume.score }}%;">
                </div>
                {% else %}
                <div class="score-fill score-high" style="width: {{ resume.score }}%;"></div>
                {% endif %}
            </div>
            <p><strong>Your Resume Score: {{ resume.score }} / 100</strong></p>
            <small class="text-muted">This score is calculated based on the content and completeness of your
                resume.</small>
            {% else %}
            <p>No score available yet.</p>
            {% endif %}
        </div>

        <!-- Bonus Videos Section -->
        <div class="section-card">
            <h5 class="section-title">Bonus Videos for Resume & Interview Tips</h5>

            <div class="mb-3">
                <p><strong>Resume Writing Tips:</strong></p>
                <a href="https://youtu.be/ZcuziWFfpQY?si=S96yTj3_7epo5n3k" target="_blank" class="video-link">
                    Watch Resume Writing Tips on YouTube
                </a>
            </div>

            <div>
                <p><strong>Interview Tips:</strong></p>
                <a href="https://youtu.be/fr-mwiyhZAo?si=09ZW7S_G9Ll_Hvae" target="_blank" class="video-link">
                    Watch Interview Tips on YouTube
                </a>
            </div>
        </div>
    </div>

    <!-- Buttons Section -->
    <div class="buttons-container">
        <a href="{{ url_for('feedback') }}" class="btn btn-outline-primary mb-3 px-4">Give Feedback</a>
        <a href="{{ url_for('download_resume_pdf', resume_id=resume.id) }}" class="btn btn-success mb-3 px-4">Download
            Resume as PDF</a>
        <br>
        <a href="{{ url_for('candidate_dashboard') }}" class="btn btn-primary px-4">Back to Dashboard</a>
    </div>
    </div>
</body>

</html>